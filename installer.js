var O=class extends Error{constructor(u){super(u),this.name="DenoStdInternalError"}};function $(s,u=""){if(!s)throw new O(u)}var{hasOwn:D}=Object;function i(s,u){if(D(s,u))return s[u]}function x(s,u){let b=i(s,u);return $(b!=null),b}function z(s){return typeof s=="number"||/^0x[0-9a-f]+$/i.test(String(s))?!0:/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(String(s))}function F(s,u){let b=s;u.slice(0,-1).forEach(w=>{b=i(b,w)??{}});let m=u[u.length-1];return D(b,m)}function N(s,{"--":u=!1,alias:b={},boolean:m=!1,default:w={},stopEarly:j=!1,string:h=[],collect:y=[],negatable:k=[],unknown:S=c=>c}={}){let c={},o={bools:{},strings:{},unknownFn:S,allBools:!1,collect:{},negatable:{}};if(b!==void 0)for(let t in b){let e=x(b,t);typeof e=="string"?c[t]=[e]:c[t]=e;for(let n of x(c,t))c[n]=[t].concat(c[t].filter(f=>n!==f))}if(m!==void 0)if(typeof m=="boolean")o.allBools=!!m;else{let t=typeof m=="string"?[m]:m;for(let e of t.filter(Boolean)){o.bools[e]=!0;let n=i(c,e);if(n)for(let f of n)o.bools[f]=!0}}if(h!==void 0){let t=typeof h=="string"?[h]:h;for(let e of t.filter(Boolean)){o.strings[e]=!0;let n=i(c,e);if(n)for(let f of n)o.strings[f]=!0}}if(y!==void 0){let t=typeof y=="string"?[y]:y;for(let e of t.filter(Boolean)){o.collect[e]=!0;let n=i(c,e);if(n)for(let f of n)o.collect[f]=!0}}if(k!==void 0){let t=typeof k=="string"?[k]:k;for(let e of t.filter(Boolean)){o.negatable[e]=!0;let n=i(c,e);if(n)for(let f of n)o.negatable[f]=!0}}let d={_:[]};function E(t,e){return o.allBools&&/^--[^=]+$/.test(e)||i(o.bools,t)||!!i(o.strings,t)||!!i(c,t)}function g(t,e,n,f=!0){let l=t,r=e.split(".");r.slice(0,-1).forEach(function(B){i(l,B)===void 0&&(l[B]={}),l=i(l,B)});let a=r[r.length-1];f&&!!i(o.collect,e)?i(l,a)===void 0?l[a]=[n]:Array.isArray(i(l,a))?l[a].push(n):l[a]=[i(l,a),n]:l[a]=n}function p(t,e,n=void 0,f){if(n&&o.unknownFn&&!E(t,n)&&o.unknownFn(n,t,e)===!1)return;let l=!i(o.strings,t)&&z(e)?Number(e):e;g(d,t,l,f);let r=i(c,t);if(r)for(let a of r)g(d,a,l,f)}function v(t){return x(c,t).some(e=>typeof i(o.bools,e)=="boolean")}let A=[];s.includes("--")&&(A=s.slice(s.indexOf("--")+1),s=s.slice(0,s.indexOf("--")));for(let t=0;t<s.length;t++){let e=s[t];if(/^--.+=/.test(e)){let n=e.match(/^--([^=]+)=(.*)$/s);$(n!=null);let[,f,l]=n;o.bools[f]?p(f,l!=="false",e):p(f,l,e)}else if(/^--no-.+/.test(e)&&i(o.negatable,e.replace(/^--no-/,""))){let n=e.match(/^--no-(.+)/);$(n!=null),p(n[1],!1,e,!1)}else if(/^--.+/.test(e)){let n=e.match(/^--(.+)/);$(n!=null);let[,f]=n,l=s[t+1];l!==void 0&&!/^-/.test(l)&&!i(o.bools,f)&&!o.allBools&&(!i(c,f)||!v(f))?(p(f,l,e),t++):/^(true|false)$/.test(l)?(p(f,l==="true",e),t++):p(f,i(o.strings,f)?"":!0,e)}else if(/^-[^-]+/.test(e)){let n=e.slice(1,-1).split(""),f=!1;for(let r=0;r<n.length;r++){let a=e.slice(r+2);if(a==="-"){p(n[r],a,e);continue}if(/[A-Za-z]/.test(n[r])&&/=/.test(a)){p(n[r],a.split(/=(.+)/)[1],e),f=!0;break}if(/[A-Za-z]/.test(n[r])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(a)){p(n[r],a,e),f=!0;break}if(n[r+1]&&n[r+1].match(/\W/)){p(n[r],e.slice(r+2),e),f=!0;break}else p(n[r],i(o.strings,n[r])?"":!0,e)}let[l]=e.slice(-1);!f&&l!=="-"&&(s[t+1]&&!/^(-|--)[^-]/.test(s[t+1])&&!i(o.bools,l)&&(!i(c,l)||!v(l))?(p(l,s[t+1],e),t++):s[t+1]&&/^(true|false)$/.test(s[t+1])?(p(l,s[t+1]==="true",e),t++):p(l,i(o.strings,l)?"":!0,e))}else if((!o.unknownFn||o.unknownFn(e)!==!1)&&d._.push(o.strings._??!z(e)?e:Number(e)),j){d._.push(...s.slice(t+1));break}}for(let[t,e]of Object.entries(w))if(!F(d,t.split("."))&&(g(d,t,e),c[t]))for(let n of c[t])g(d,n,e);for(let t of Object.keys(o.bools))if(!F(d,t.split("."))){let e=i(o.collect,t)?[]:!1;g(d,t,e,!1)}for(let t of Object.keys(o.strings))!F(d,t.split("."))&&i(o.collect,t)&&g(d,t,[],!1);if(u){d["--"]=[];for(let t of A)d["--"].push(t)}else for(let t of A)d._.push(t);return d}var K={url:"file:///C:/Users/Samuel/code/.azury/drgn/installer.ts",main:import.meta.main};if(K.main){let s=N(Deno.args),u=s.u??s.url,b=Date.now().toString();await Deno.run({cmd:["deno","install","-q","-n",s.n??s.name,"-f","--location",`https://drgn.azury.dev/${s.n??s.name}_${b}`,"-A",`https://drgn.azury.dev/run?version=v0.6.0&name=${u.split("/")[0].split("@")[0]}&url=${btoa(`https://deno.land/x/${u}`)}&location=${s.n??s.name}_${b}`]}).status(),Deno.exit()}
